<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 3 - Grammar Rules</title>
    <link rel="stylesheet" href="/static/lesson3.css">
    <script>
        // Predefined Grammar Questions
        const grammarQuestions = [
            { question: "What is the correct form of the verb in: 'She ____ (go) to the market every day.'", answer: "goes" },
            { question: "What is the correct form of the verb in: 'They ____ (eat) lunch at 12:00 PM every day.'", answer: "eat" },
            { question: "Fill in the blank: 'I ____ (be) very happy to meet you.'", answer: "am" },
            { question: "What is the correct article in: 'He is ____ doctor.'", answer: "a" },
            { question: "What is the plural form of 'child'?", answer: "children" },
            { question: "What is the past tense of 'run'?", answer: "ran" },
            { question: "Complete the sentence: 'I have ____ books.'", answer: "many" },
            { question: "Fill in the blank: 'I ____ (not have) a car.'", answer: "do not have" },
            { question: "What is the correct preposition: 'She is good ____ singing.'", answer: "at" },
            { question: "What is the correct form of 'to be' in: 'We ____ going to the park.'", answer: "are" }
        ];

        let currentQuestionIndex = 0;
        let score = 0; // Track the user's score
        const totalQuestions = grammarQuestions.length;

        // Load Grammar Question
        function loadQuestion() {
            const questionContainer = document.getElementById("question");
            const inputContainer = document.getElementById("input-container");
            const question = grammarQuestions[currentQuestionIndex];

            questionContainer.textContent = question.question;

            // Clear previous input
            inputContainer.innerHTML = `
                <input type="text" id="userAnswer" class="answer-input" placeholder="Type your answer here...">
                <button onclick="checkAnswer()">Submit Answer</button>
            `;
        }

        // Check the typed answer
        function checkAnswer() {
            const userAnswer = document.getElementById("userAnswer").value.trim().toLowerCase();
            const correctAnswer = grammarQuestions[currentQuestionIndex].answer.toLowerCase();

            if (userAnswer === correctAnswer) {
                score++; // Increment score for correct answer
                alert("Correct!");
            } else {
                alert(`Incorrect. The correct answer is: ${grammarQuestions[currentQuestionIndex].answer}`);
            }

            // Move to the next question or show score
            currentQuestionIndex++;
            if (currentQuestionIndex < grammarQuestions.length) {
                loadQuestion(); // Load next question
            } else {
                showScore(); // Show final score
            }
        }

        // Show the user's score
        function showScore() {
            const questionSection = document.getElementById("question-section");
            questionSection.innerHTML = `
                <div class="score-section">
                    <h2>Your Score</h2>
                    <p>You scored ${score} out of ${totalQuestions}.</p>
                    
                </div>
            `;
        }

        // Initialize the quiz
        window.onload = () => {
            loadQuestion(); // Load the first question
        };
    </script>
</head>
<body>
    <header class="test-header">
        <h1>Lesson 3: Grammar Rules</h1>
    </header>
    <main class="test-content">
        <section id="question-section">
            <h2 id="question"></h2>
            <div id="input-container"></div>
        </section>
    </main>
    <footer class="test-footer">
        <a href="{{ url_for('home') }}" class="back-button">Back to Home</a>
    </footer>
</body>
</html>
